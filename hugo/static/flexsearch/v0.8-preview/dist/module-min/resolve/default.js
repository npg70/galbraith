import{concat}from"../common.js";export default function(a,b,c,d){if(1===a.length)return a=a[0],a=c||a.length>b?b?a.slice(c,c+b):a.slice(c):a,d?enrich_result(a):a;let e=[];for(let f,g,h=0;h<a.length;h++)if((f=a[h])&&(g=f.length)){if(c){if(c>=g){c-=g;continue}c<g&&(f=b?f.slice(c,c+b):f.slice(c),g=f.length,c=0)}if(!e.length){if(g>=b)return g>b&&(f=f.slice(0,b)),d?enrich_result(f):f;e=[f]}else g>b&&(f=f.slice(0,b),g=f.length),e.push(f);if(b-=g,!b)break}return e.length?(e=1<e.length?concat(e):e[0],d?enrich_result(e):e):e}function enrich_result(a){for(let b=0;b<a.length;b++)a[b]={score:b,id:a[b]};return a}