import Index from"../index.js";import{IndexOptions}from"../type.js";export default(async function(a){a=a.data;const b=self._index,c=a.args,d=a.task;switch(d){case"init":let e=a.options||{},f=e.config;f&&(e=f);const g=a.factory;g?(Function("return "+g)()(self),self._index=new self.FlexSearch.Index(e),delete self.FlexSearch):self._index=new Index(e),postMessage({id:a.id});break;default:const h=a.id,i=b[d].apply(b,c);postMessage("search"===d?{id:h,msg:i}:{id:h});}});